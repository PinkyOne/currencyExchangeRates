import axios from 'axios/index';
import {
    getLatestCurrencies,
    getCurrentCurrency
} from "api";

jest.mock('axios');

test('get latest', async () => {
    const mockedResponse = {
        data: {
            timestamp: 1557054007,
            base: 'USD',
            rates:
                {
                    AED: 3.673014,
                    AFN: 77.499438,
                    ALL: 110.45,
                    AMD: 480.48986,
                    ANG: 1.874844,
                    AOA: 325.135,
                    ARS: 44.446,
                    AUD: 1.4243,
                    AWG: 1.8,
                    AZN: 1.7025,
                    BAM: 1.753601,
                    BBD: 2,
                    BDT: 84.38,
                    BGN: 1.74791,
                    BHD: 0.377059,
                    BIF: 1835,
                    BMD: 1,
                    BND: 1.350606,
                    BOB: 6.90955,
                    BRL: 3.9395,
                    BSD: 1,
                    BTC: 0.000172709073,
                    BTN: 69.31288,
                    BWP: 10.786129,
                    BYN: 2.112959,
                    BZD: 2.015591,
                    CAD: 1.343703,
                    CDF: 1636,
                    CHF: 1.01685,
                    CLF: 0.023958,
                    CLP: 677.005,
                    CNH: 6.734857,
                    CNY: 6.734644,
                    COP: 3240.42515,
                    CRC: 595.205919,
                    CUC: 1,
                    CUP: 25.75,
                    CVE: 98.9275,
                    CZK: 22.9508,
                    DJF: 178,
                    DKK: 6.6662,
                    DOP: 50.615,
                    DZD: 119.659485,
                    EGP: 17.1635,
                    ERN: 14.99899,
                    ETB: 29,
                    EUR: 0.89194,
                    FJD: 2.152842,
                    FKP: 0.759129,
                    GBP: 0.759129,
                    GEL: 2.705,
                    GGP: 0.759129,
                    GHS: 5.18,
                    GIP: 0.759129,
                    GMD: 49.685,
                    GNF: 9230,
                    GTQ: 7.659456,
                    GYD: 209.145546,
                    HKD: 7.84515,
                    HNL: 24.584925,
                    HRK: 6.619037,
                    HTG: 87.000153,
                    HUF: 288.62,
                    IDR: 14202.327728,
                    ILS: 3.58308,
                    IMP: 0.759129,
                    INR: 69.178,
                    IQD: 1190,
                    IRR: 42105,
                    ISK: 121.369769,
                    JEP: 0.759129,
                    JMD: 134.729243,
                    JOD: 0.709004,
                    JPY: 111.105,
                    KES: 101.11,
                    KGS: 68.708449,
                    KHR: 4060,
                    KMF: 440.374372,
                    KPW: 900,
                    KRW: 1164.33,
                    KWD: 0.304181,
                    KYD: 0.833274,
                    KZT: 381.41,
                    LAK: 8628.5,
                    LBP: 1509.45,
                    LKR: 176.907579,
                    LRD: 173.37529,
                    LSL: 14.36,
                    LYD: 1.4,
                    MAD: 9.66625,
                    MDL: 17.830168,
                    MGA: 3620,
                    MKD: 55.0278,
                    MMK: 1521.051433,
                    MNT: 2453.75,
                    MOP: 8.080494,
                    MRO: 357,
                    MRU: 36.77,
                    MUR: 35.207,
                    MVR: 15.400001,
                    MWK: 734.536638,
                    MXN: 18.918982,
                    MYR: 4.142504,
                    MZN: 64.050449,
                    NAD: 14.4,
                    NGN: 360,
                    NIO: 33.07,
                    NOK: 8.7006,
                    NPR: 110.903644,
                    NZD: 1.5049,
                    OMR: 0.385011,
                    PAB: 1,
                    PEN: 3.314334,
                    PGK: 3.36,
                    PHP: 51.745104,
                    PKR: 141.45,
                    PLN: 3.8174,
                    PYG: 6327.0557,
                    QAR: 3.640999,
                    RON: 4.239518,
                    RSD: 105.350103,
                    RUB: 65.0609,
                    RWF: 905,
                    SAR: 3.75041,
                    SBD: 8.226062,
                    SCR: 13.680528,
                    SDG: 45.175,
                    SEK: 9.538223,
                    SGD: 1.3604,
                    SHP: 0.759129,
                    SLL: 8390,
                    SOS: 584.5,
                    SRD: 7.458,
                    SSP: 130.2634,
                    STD: 21050.59961,
                    STN: 21.9,
                    SVC: 8.749649,
                    SYP: 515.093439,
                    SZL: 14.465,
                    THB: 31.879145,
                    TJS: 9.429828,
                    TMT: 3.499986,
                    TND: 3.02541,
                    TOP: 2.2829,
                    TRY: 5.9644,
                    TTD: 6.77275,
                    TWD: 30.872,
                    TZS: 2305.1,
                    UAH: 26.608,
                    UGX: 3769.749872,
                    USD: 1,
                    UYU: 35.100967,
                    UZS: 8445,
                    VEF: 248487.642241,
                    VES: 5192.50683,
                    VND: 23130.633181,
                    VUV: 111.058203,
                    WST: 2.626662,
                    XAF: 585.074287,
                    XAG: 0.066957,
                    XAU: 0.00078191,
                    XCD: 2.70255,
                    XDR: 0.719582,
                    XOF: 585.074287,
                    XPD: 0.00072814,
                    XPF: 106.436754,
                    XPT: 0.00114746,
                    YER: 250.350747,
                    ZAR: 14.350975,
                    ZMW: 12.924,
                    ZWL: 322.355011
                }
        },
        status: 200,
        statusText: 'OK',
    };
    axios.get.mockResolvedValue(mockedResponse);

    const resp = await getLatestCurrencies();
    expect(resp).toMatchObject(mockedResponse);
});

test('get current currency', async () => {
    const mockedResponse = {
        data: {
            currency: {code: 'RUB'}
        }
    };
    axios.get.mockResolvedValue(mockedResponse);

    const resp = await getCurrentCurrency();
    expect(resp).toMatchObject(mockedResponse);
});
